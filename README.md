# CTF Challenge: Path Traversal Exploit
Это приложение демонстрирует уязвимость, связанную с Path Traversal (Обход пути). Участникам CTF нужно использовать эту уязвимость, чтобы прочитать файл `flag.txt`, находящийся в корневой директории проекта.
## Описание уязвимости
Уязвимость находится на эндпоинте `/view` (ссылка на навигационной панели `View File`), где приложение позволяет пользователю указывать имя файла для чтения. Однако приложение не проверяет входные данные должным образом, что позволяет злоумышленнику использовать Path Traversal для доступа к файлам за пределами директории `uploads`.

## Почему это происходит?
- Приложение использует пользовательский ввод для формирования пути к файлу без должной проверки.
- Приложение не нормализует путь перед его использованием, что позволяет злоумышленнику использовать различные варианты записи для обхода защиты.
- Злоумышленник может использовать URL-кодирование.

## Способы защиты
1. **Полная проверка входных данных.**
2. **Нормализация пути.**
3. **Использование whitelist** – разрешать доступ только к файлам из заранее определённого списка (whitelist)**.**
4. **Экранирование специальных символов** - Экранировать специальные символы, такие как `/`, `\`, и `.`, чтобы предотвратить их использование в Path Traversal.

## Запуск приложения
### Требования:
- Docker
- Docker Compose

### Инструкция по запуску:
1. Клонируйте репозиторий:
   ```bash
   git clone git@github.com:pegasak/CTF_Path_Traversal.git
2. Перейдите в директорию проекта:
    ```bash
   cd CTF_Path_Traversal
3. Запустите приложение:
    ```bash
   docker-compose up --build
4. Приложение будет доступно по адресу: `http://localhost:5000`

### PoC-эксплоит для получения флага
1. Создайте любой файл с расширением `.txt` и запишите в него какую-нибудь информацию, сохраните у себя локально на устройстве.
2. Запустите приложение и, при помощи навигационной панели, перейдите на страницу загрузки файла - `Upload File`.
3. Загрузите ваш созданный файл.
4. Перейдите на страницу просмотра содержимого файлов - `View File`, проверьте, что написано в вашем файле.
5. Теперь давайте получим флаг:
   1) в строку названия файла введите - `%2e%2e%2fflag.txt`
   2) вы получите содержимое файла `flag.txt`, то есть флаг

Приложение проверяет наличие `../` в имени файла, но не учитывает другие варианты кодирования или обхода, такие как URL-кодирование `%2e%2e%2f`.
